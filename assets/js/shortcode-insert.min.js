jQuery(function(e){if(e(".color-field").wpColorPicker({mode:"rgba"}),e("body").on("click","#engage-forms-form-insert,#wp_fs_engage-forms",function(t){t.preventDefault();var a=e(".engage-forms-insert-modal");data=e(this).data("settings"),data&&(data.id&&e('.selected-form-shortcode[value="'+data.id+'"]').prop("checked",!0),data.modal&&(e(".set_ef_modal").prop("checked",!0),e(".modal-forms-setup").show()),data.type&&e(".modal_trigger_type").val(data.type),data.content&&e(".modal_trigger").val(data.content),data.width&&e(".modal_width").val(data.width),e(this).data("settings",{})),a.fadeIn(100)}),e("body").on("click",".engage-modal-closer",function(t){t.preventDefault();var a=e(".engage-forms-insert-modal");e("#engagef_forms_shortcode_modal")[0].reset(),e(".modal-forms-setup").hide(),a.fadeOut(100)}),e("body").on("change",".set_ef_modal",function(t){var a=e(this);a.is(":checked")?e(".modal-forms-setup").show():e(".modal-forms-setup").hide()}),e("body").on("click",".engage-form-shortcode-insert",function(t){t.preventDefault();var a,o=e(".selected-form-shortcode:checked"),d=e(".set_ef_modal").prop("checked"),r=e(".modal_trigger").val(),c=e(".modal_trigger_type").val(),i=e(".modal_width").val();if(o.length){var s="engage-form";d&&(s="engage-form_modal"),a="["+s+' id="'+o.val()+'"',d===!0&&"button"===c&&(a+=' type="'+c+'"'),i.length&&(a+=' width="'+i+'"'),a+="]",d&&(a+=r.length?r:o.parent().text(),a+="[/engage-form_modal]"),e("#engagef_forms_shortcode_modal")[0].reset(),e(".modal-forms-setup").hide(),o.prop("checked",!1),window.send_to_editor(a),e(".engage-modal-closer").trigger("click")}}),"undefined"!=typeof wp&&"undefined"!=typeof wp.media){var t=wp.media;"function"==typeof wp.mce.views.register&&wp.mce.views.register("engage-form",{template:t.template("editor-engage-forms"),initialize:function(){this.fetch()},setLoader:function(){this.setContent('<div class="loading-placeholder"><div class="dashicons dashicons-update" style="color:#a3be5f;"></div><div class="wpview-loading"><ins style="background-color:#a3be5f;"></ins></div></div>')},fetch:function(){var t=this,a={post_id:e("#post_ID").val(),content:t.shortcode.content,atts:t.shortcode.attrs};wp.ajax.post("ef_get_form_preview",a).done(function(e){t.render(e.html)}).fail(function(e){t.render(e.html)})},edit:function(e){var t=this.shortcode.attrs.named;t.content=this.shortcode.content,jQuery("#engage-forms-form-insert").data("settings",t).trigger("click")}})}});